<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <title>
    </title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <script src="./Make.js"></script>
    <script type="text/javascript">
      document.addEventListener( "DOMContentLoaded", function() {
        var make = Make({
          makeAPI: "http://localhost:5000"
        });

        window.grabTags = function() {
          make.getByTags({
            tags: document.getElementById( "tags-single" ).value.split( "," ),
            "minimum_match": 1
          }).run(function( data ) {
            console.log(data);
          });
        };

        window.myProjects = function() {
          make.getAuthorsMakes({
            author: document.getElementById( "author" ).value
          })
          .withTags({
            tags: document.getElementById( "tags-multiple" ).value.split( "," ),
            execution: document.querySelector( "input[name='execution']:checked" ).value
          })
          .size( document.getElementById( "size" ).value )
          .run(function( data ) {
            console.log(data);
          });
        };

        var makeTitle = document.getElementById( "make-title" ),
            makeAuthor = document.getElementById( "make-author" ),
            makeBody = document.getElementById( "make-body" ),
            makeContentType = document.getElementById( "make-content-type" ),
            makeDifficulty = document.getElementById( "make-difficulty" ),
            makeLocale = document.getElementById( "make-locale" ),
            makeUrl = document.getElementById( "make-url" ),
            makeTags = document.getElementById( "make-tags" ),
            makeId = document.getElementById( "make-id" ),
            makeResult = document.getElementById( "make-result" );

        function getData() {
          return {
            title: makeTitle.value,
            author: makeAuthor.value,
            body: makeBody.value,
            contentType: makeContentType.value,
            difficulty: makeDifficulty.value,
            locale: makeLocale.value,
            url: makeUrl.value,
            tags: makeTags.value.split( "," )
          };
        }

        function handleResponse( resp ) {
          makeId.value = resp._id;
          makeResult.value = JSON.stringify( resp, null, 2 );
        }

        window.createMake = function() {
          make.createMake( getData(), handleResponse );
        };

        window.updateMake = function() {
          make.updateMake( makeId.value, getData(), handleResponse )
        };

        window.deleteMake = function() {
          make.deleteMake( makeId.value, handleResponse );
        }
      }, false );
    </script>

  </head>

  <body>
    All inputs accept CSV for multiple search terms<br /><br />
    Tags<input type="text" id="tags-single"/><br /><br />

    <input type="button" onclick="grabTags();" value="Search Tags"/>

    <br /><br /><br />
    Tags<input type="text" id="tags-multiple"/><br /><br />
    Author (not CSV)<input type="text" id="author"/><br /><br />
    Num<input type="number" id="size" /><br />
    Execution:<br />
    And<input type="radio" name="execution" value="and" checked/>
    Or<input type="radio" name="execution" value="bool" />

    <input type="button" onclick="myProjects();" value="Search My Projects"/>
    <hr/>

    <h2>Create / Update</h2>
    ID <input type="text" id="make-id" value="" placeholder="ID HERE"><br /><br />
    Title <input type="text" id="make-title" value="" placeholder="title"><br/>
    Author <input type="text" id="make-author" value="" placeholder="Author"><br/>
    Body <input type="text" id="make-body" value="" placeholder="body content"><br/>
    ContentType
    <select id="make-content-type">
      <option text="text/html" value="text/html">text/html</option>
      <option value="application/butter">application/butter</option>
    </select><br />
    Difficulty
    <select id="make-difficulty">
      <option value="Beginner">Beginner</option>
      <option value="Intermediate">Intermediate</option>
      <option value="Advanced">Advanced</option>
    </select><br />
    Locale <input type="text" id="make-locale" value="" placeholder="locale"><br />
    Url <input type="text" id="make-url" value="" placeholder="URL"><br />
    Tags(comma separated) <input type="text" id="make-tags" value="" placeholder="tags">
    <br /></br />
    <input type="button" onclick="createMake();" value="Create a Make" /><br />
    <input type="button" onclick="updateMake();" value="Update a Make" /><br />
    <input type="button" onclick="deleteMake();" value="Delete a Make" /></br />
    <textarea id="make-result" readonly="true" rows="20" cols="80"></textarea>
    <hr />
  </body>
</html>
